# This file is generated by Ansible
#  DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
#

# NOTE: here we assume the gearman, statd and zuul services merger and fingergw deployed
# in one "zuul" node, if not, need to modify following ip address options

[gearman]
port = 4730
server = {{ hostvars[inventory_hostname].ansible_host }}

[gearman_server]
start = false

[scheduler]
tenant_config = {{ zuul_file_main_yaml_dest }}
log_config = /etc/zuul/scheduler-logging.conf
state_dir = {{ zuul_user_home }}

# [statsd]
# server = {{ hostvars[inventory_hostname].ansible_host }}

[executor]
finger_port = 17979
log_config = /etc/zuul/executor-logging.conf
private_key_file = {{ zuul_user_home }}/.ssh/id_rsa
disk_limit_per_job=1024
load_multiplier=4

[fingergw]
listen_address = {{ hostvars[inventory_hostname].ansible_host }}
log_config = /etc/zuul/fingergw-logging.conf
user = {{ zuul_user_name }}

[merger]
git_dir = {{ zuul_user_home }}/git
git_user_email = theopenlab.ci@gmail.com
git_user_name = theopenlab-ci
log_config = /etc/zuul/merger-logging.conf
zuul_url = {{ hostvars[inventory_hostname].ansible_host }}

[web]
log_config = /etc/zuul/web-logging.conf
listen_address=0.0.0.0
sql_connection_name=mysql
status_url=http://{{ zuul_public_ip }}/

[zookeeper]
{% if 'zookeeper' in groups %}
hosts = {{ groups['zookeeper'] | map('extract', hostvars, 'ansible_host') | join(', ') }}
{% endif %}

[connection github]
driver=github
server=github.com
user=zuul
sshkey={{ zuul_user_home }}/.ssh/id_rsa
app_id={{ github_app_id }}
app_key={{ zuul_user_home }}/openlab-app-key.pem
webhook_token={{ github_webhook_token }}
verify_ssl=false

[connection openstack-git]
driver=git
baseurl=https://opendev.org/

[connection mysql]
driver=sql
dburi=mysql+pymysql://zuul:zuul@127.0.0.1/zuul
